1、在服务器中创建文件夹 sr_product

```
mkdir sr_product
```

2、进入sr_product 创建虚拟环境sr_venv

```
python -m venv sr_venv
```

3、从服务器拉取项目

4、进入虚拟环境

```
source sr_venv/bin/activate
```

```
(sr_venv) [sharui@iZ2zeetbb1qeqmasffvzk8Z sr_product]$
```

5、进入项目文件夹后导入pip

```
pip3 download -r requirements.txt -d packages
pip3 install --no-index --find-links=packages -r requirements.txt  
```

6、导入后查看pip3 list是否安装成功

7、同步数据库

```python
python3 app.py db init  初始化
python3 app.py db migrate -m 'init tables'  初始化表
python3 app.py db upgrade 更新
```

* 可能出现Target database is not up to date.错误
  * 解决 通过在alembic_version中添加本地数据
  * `insert into alembic_version values('e5a53ab3d25a')`

8、安装gunicorn

9、启动gunicorn -w 4 -b 127.0.0.1:5000 app:app 

​	  app为flask的入口名称 例如创建项目是manager.py就用 gunicorn -w 4 -b 127.0.0.1:4000 manager:app 





# linux指令

mkdir 创建文件夹

查看占用端口

```linux
netstat -lnp
```

# Python 命令

### 创建虚拟环境

Python 3.6.8可以用自带的命令建立虚拟环境，不用安装另外的如 **virtualenv**、**virtualenvwrapper等工具。**

##### 创建虚拟环境

```
python -m venv sr_venv
```

##### 进入虚拟环境

```
source sr_venv/bin/activate
```

##### 退出虚拟环境

```
deactivate
```

##### 导出环境配置信息

```
pip freeze > requirements.txt
```

##### 通过配置信息下载pip包

```
pip download -r requirements.txt -d packages   
```

##### 安装配置信息

```
pip install --no-index --find-links=packages -r requirements.txt  
```



### gunicorn 命令启动

```
gunicorn -w 4 -b 127.0.0.1:4000 run:app
```



# Nginx相关



```
systemctl start nginx.service
systemctl stop nginx.service
systemctl reload nginx.service
systemctl status nginx.service
```



# 数据库

mysql -uroot -p



导出数据库

mysqldump -u root -p travel_product>test.sql

导入source